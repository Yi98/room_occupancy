<!DOCTYPE html>
<html lang="en">
<head>
<title>Charts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- stylesheet -->
<link rel="stylesheet" href="../css/style.css" type="text/css"/>
<!-- javascript -->
<script src="../js/bundle.js" type="text/javascript"></script>
<script src="../js/script.js" type="text/javascript"></script>
<!-- Chartist -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css"/>
<script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
<!-- HighChart -->
<script src="https://code.highcharts.com/5/js/highcharts.js"></script>
<script src="https://code.highcharts.com/5/js/modules/exporting.js"></script>
<script src="https://code.highcharts.com/5/js/modules/offline-exporting.js"></script>
<script src="../js/svg_todataurl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvg/dist/browser/canvg.min.js"></script>

<!-- DaterangePicker -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

<!--moment js-->
<script src="https://cdn.jsdelivr.net/npm/moment@2.19.3/moment.min.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">

<!-- embed font -->
<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Unica+One" />

</head>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
<body onload="showChart()">

	<div class="container-fluid">
		<div class="row nav-wrapper">
			<div class="col-md-2 col-sm-12 col-xs-12 left-menu-1">
					<img src="https://www.swinburne.edu.au/content/dam/media/brand/swin-logo-h-RGB.jpg/_jcr_content/renditions/cq5dam.web.1280.1280.jpeg" class="img-fluid logo pt-3" alt="logo">
				</div>
				<div class="col-md-10 col-sm-12 col-xs-12 right-menu-1 mt-3 align-self-center">
					<div class="row">
						<div class="col-md-10 col-page-title text-left pl-5">
							<p class="pageTitle pt-1">Room information : <span id="room_name"></span></p>
						</div>
						<div class="col-md-2 col-sm-4 col-xs-4">
							<p class="right-menu-icons float-right mr-4">
								<a href="#" data-placement="top" data-toggle="tooltip" title="Log Out">
									<i class="fa fa-sign-out" id="logoutBtn" onclick="onLogout()"></i>
								</a>
							</p>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row main-wrapper">
				<div class="col-md-2 col-sm-12 col-xs-12 left-menu-2">
					<nav class="navbar text-center" id="myNavbar">
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link" href="/dashboard">Dashboard</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/users">Users</a>
							</li>
						</ul>
					</nav>
				</div>
				<div class="col-md-10 col-sm-12 col-xs-12 c right-menu-2">
					<div class="chart-wrapper container-fluid">
						<div class="row container">
							<div class="col-md-3 col-xs-6 col-sm-6" id="timerange">
								<i class="fa fa-clock-o"></i>&nbsp;
								<span id="choosenTimeRange" class="choosenRange"></span>
								<i class="fa fa-caret-down"></i>
							</div>
							<div class="col-md-3 col-xs-6 col-sm-6 ml-2" id="reportrange">
								<i class="fa fa-calendar"></i>&nbsp;
								<span id="choosenRange" class="choosenRange"></span>
								<i class="fa fa-caret-down"></i>
							</div>
							<div class="col-md-3 col-xs-12 col-sm-12">
								<button type="button" class="btn float-left btn-info" id="pdfButton" onclick="directToPdf()" disabled>Generate Report</button>
							</div>
							
							<script type="text/javascript">
								$(function() {
									
									var start = moment().utc();
									start.set({hour: 0, minutes: 0,second: 0, milliseconds: 0})
									start.toISOString()

									var end = moment().utc();
									end.set({hour: 23, minutes: 0,second: 0, milliseconds: 0})
									end.toISOString()

									var temp = moment().utc();

									function cb(start, end) {
											$('#timerange span').html(start.format('HH:mm') + ' - ' + end.format('HH:mm'));
									}

									$('#timerange').daterangepicker({
										timePicker: true,
										timePicker24Hour: true,
										startDate: start,
										endDate: end,
										ranges: {
											'00:00 - 23:00': [start, end],
											'08:00 - 21:00': [moment().utc().set({hour: 0, minutes: 0,second: 0, milliseconds: 0}).add(8,'hours'), moment().utc().set({hour: 23, minutes: 0,second: 0, milliseconds: 0}).subtract(2,'hours')],
											'00:00 - 12:00': [start, moment().utc().set({hour: 0, minutes: 0,second: 0, milliseconds: 0}).add(12,'hours')],
											'12:00 - 23:00': [moment().utc().set({hour: 0, minutes: 0,second: 0, milliseconds: 0}).add(12,'hours'), end]
										}
									}, cb);

									cb(start, end);
									$('.ranges li:last-child' ).hide();
								});
							</script>
							<script type="text/javascript">
									$(function() {
										
										var start = moment();
										var end = moment();

										function cb(start, end) {
												$('#reportrange span').html(start.format('MM/DD/YYYY') + ' - ' + end.format('MM/DD/YYYY'));
										}

										$('#reportrange').daterangepicker({
											startDate: start,
											endDate: end,
											ranges: {
												'Today': [moment(), moment()],
												'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1,'days')],
												'Last 7 Days': [moment().subtract(6, 'days'), moment()],
												'Last 30 Days': [moment().subtract(29, 'days'), moment()],
												'Last Year': [moment().subtract(364, 'days'), moment()]
											}
										}, cb);

										cb(start, end);
									});
							</script>
						</div>
						<div class="row" id="chartAll">
							<div class="col-md-12 col-sm-12 col-xs-12">
								<div class="mt-4" id="allChart" style="width:100%;">
									<!-- Chart for all chart -->
									<div class="d-flex h-100 justify-content-center">
										<div class="align-self-center">
											<div class="spinner-border text-danger" style="width:3rem; height:3rem;">
												<span class="sr-only">Loading...</span>
											</div>
										</div>
									</div>
								</div>
							</div>
							
							<div class="col-md-12 col-sm-12 col-xs-12">
								<div class="img-thumbnail" id="peopleChart" style="width:100%; display:none;">
								</div>
							</div>
							<div class="col-md-6 col-sm-12 col-xs-12">
								<div class="img-thumbnail" id="temperatureChart" style="width:100%; display:none;">
								</div>
							</div>
							<div class="col-md-6 col-sm-12 col-xs-12">
								<div class="img-thumbnail" id="humidityChart" style="width:100%; display:none;">
								</div>
							</div>
						</div>
					</div>
		
				</div>
			</div>
		</div>
	</body>
</html>
